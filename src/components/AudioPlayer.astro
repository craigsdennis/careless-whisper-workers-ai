---
interface Props {
  src?: string;
}
const { src } = Astro.props;
---
<audio-player>
  <audio src={src} preload="metadata" controls />
  <slot />
</audio-player>

<script>
    class AudioPlayer extends HTMLElement {
      updateAudio(src: string) {
        const audio = this.querySelector("audio") as HTMLAudioElement;
        audio.src = src;
        this.refresh();
      }
      refresh() {
        this.querySelectorAll(".refreshable").forEach((el) => {
          el.refresh();
        });
      }
    }
    customElements.define("audio-player", AudioPlayer);
</script>